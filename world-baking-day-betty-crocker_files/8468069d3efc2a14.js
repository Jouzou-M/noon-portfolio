(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,854645,e=>{"use strict";var t,s=((t={})[t.Map=0]="Map",t[t.InputForm=1]="InputForm",t);e.s(["AddressFlowSteps",()=>s])},116708,e=>{"use strict";var t=e.i(575727),s=e.i(268826),a=e.i(104043),l=e.i(755581);let r=e=>e*Math.PI/180,d=(e,t)=>({label:e.tag.toUpperCase(),isDefault:e.isDefault,addressInfo:{propertyDetails:{unitIdentifier:e.apartmentNumber,propertyName:e.buildingName,streetName:e.streetName,addressTitle:e.nickname,directions:e.directions},placeName:t.placeName,area:t.area,idCity:t.cityId,location:t.location},customer:{firstName:e.firstName,lastName:e.lastName,phone:`${e.dialCode}-${e.phoneNumber}`}});e.s(["distanceToText",0,e=>{let t=e,s="";return e>999&&(t=999,s="+"),t<1?`${(1e3*t).toFixed(0)} m`:`${t.toFixed(0)}${s} km`},"filterAddressesByQuery",0,(e,s)=>s?.filter(s=>s.type===t.AddressType.Collection?s.addressInfo.singleLineAddress?.includes(e):[s.label,s.addressInfo?.singleLineAddress,s.addressInfo?.placeName,s.addressInfo?.area,s.addressInfo?.propertyDetails?.addressTitle].some(t=>(t||"").includes(e))),"getAddressInfo",0,(e,a)=>{let l={title:"",icon:"",subtitle:`${e.addressInfo?.singleLineAddress}, ${e.addressInfo?.area||""}`,customerName:`${e.customer.firstName} ${e.customer.lastName}`};if(e.type===t.AddressType.Collection)return e.collectionType===t.CollectionPointTypes.Locker?(l.title=a(e.collectionType),l.icon=s.default.images.locker):(l.title=a("pickup-point"),l.icon=s.default.images.pickupPoint),l;let r=e.label.toLowerCase()||"home",d=e.addressInfo?.propertyDetails?.addressTitle,o=a(r);return l.title=d||o||"",l.icon=s.default.images[r],l},"getDistanceBetweenGeographicCoordinates",0,(e,t)=>{if(!e||!t)return 0;let s=r(t.lat-e.lat),a=r(t.lng-e.lng),l=Math.sin(s/2)*Math.sin(s/2)+Math.cos(r(e.lat))*Math.cos(r(t.lat))*Math.sin(a/2)*Math.sin(a/2);return 2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))*6371},"getRegionCenter",0,e=>{let{apiRegion:t}=(0,a.getLocale)(e),s=l.default.map.precision,r=l.default.map.centralGeoLocations[t];return{lat:r.lat/s,lng:r.lng/s}},"mapNewAddressFormToPayload",0,d,"mapUpdateAddressFormToPayload",0,(e,t,s)=>({...d(t,s),code:e})])},343638,e=>{"use strict";var t=e.i(768834),s=e.i(214854),a=e.i(575727),l=e.i(854645),r=e.i(116708),d=e.i(166496);let o=e.i(167577).default.getState().getWhoAmI,n=(0,t.create)((e,t)=>({resetState:()=>{(0,t().setAddressSearchQuery)(""),e({addressFlowStep:l.AddressFlowSteps.Map,addressFormInitialValues:null})},addresses:null,isLoadingAddresses:!0,getAddresses:async({onSuccess:t,onError:a})=>{e({isLoadingAddresses:!0});try{let{data:{addresses:a}}=await (0,s.addressesSVC)().getAddresses();e({addresses:a}),t?.(a)}catch(e){(0,d.reportEvent)({message:"API Error: Failed to get addresses",logger:"stores.addresses.getAddresses",extra:{error:e}}),a?.(e)}finally{e({isLoadingAddresses:!1})}},isLoadingAddress:!1,getAddressByKey:async({addressKey:t,onSuccess:a,onError:l})=>{e({isLoadingAddress:!0});try{let{data:{data:e}}=await (0,s.addressesSVC)().getAddressByKey(t);a?.(e)}catch(e){(0,d.reportEvent)({message:"API Error: Failed to get address by key",logger:"stores.addresses.getAddressByKey",extra:{error:e,addressKey:t}}),l?.(e)}finally{e({isLoadingAddress:!1})}},isLoadingUpdateDefaultAddress:!1,updateDefaultAddress:async({onSuccess:a,onError:l,addressCode:r,seoLocale:n})=>{let i=t().setAddressSearchQuery;e({isLoadingUpdateDefaultAddress:!0});try{let{data:{addresses:t}}=await (0,s.addressesSVC)().updateDefaultAddress(r);await o({seoLocale:n}),e({addresses:t}),a?.(t),i("")}catch(e){(0,d.reportEvent)({message:"API Error: Failed to update default address",logger:"stores.addresses.updateDefaultAddress",extra:{error:e,addressCode:r}}),l?.(e)}finally{e({isLoadingUpdateDefaultAddress:!1})}},setAddresses:t=>e({addresses:t}),addressSearchQuery:"",isLoadingAddressSearch:!1,addressSearchResult:null,filteredAddressList:null,setAddressSearchQuery:s=>{if(e({addressSearchQuery:s}),!s.length)return void e({filteredAddressList:null});let a=t().addresses;e({filteredAddressList:(0,r.filterAddressesByQuery)(s,a)})},addressFormInitialValues:null,setAddressFormInitialValues:t=>{if(!(t&&t.type!==a.AddressType.Collection))return e({addressFormInitialValues:null});let[s,...l]=t.customer.phone.split("-");e({addressFormInitialValues:{code:t.code,tag:t.label.toLowerCase(),apartmentNumber:t.addressInfo?.propertyDetails?.unitIdentifier??"",buildingName:t.addressInfo?.propertyDetails?.propertyName??"",nickname:t.addressInfo?.propertyDetails?.addressTitle??"",directions:t.addressInfo?.propertyDetails?.directions??"",streetName:t.addressInfo?.propertyDetails?.streetName??"",firstName:t.customer.firstName,lastName:t.customer.lastName,phoneNumber:l.join(""),dialCode:s??"",isDefault:t.isDefault}})},addressFlowStep:l.AddressFlowSteps.Map,setAddressFlowStep:t=>e({addressFlowStep:t}),isLoadingSubmitAddressForm:!1,createNewAddress:async({onSuccess:t,onError:a,newAddress:l,coordinateDetails:n,seoLocale:i})=>{e({isLoadingSubmitAddressForm:!0});try{let a=(0,r.mapNewAddressFormToPayload)(l,n),{data:{addresses:d}}=await (0,s.addressesSVC)().createNewAddress(a);await o({seoLocale:i}),e({addresses:d}),t?.()}catch(e){(0,d.reportEvent)({message:"API Error: Failed to create new address",logger:"stores.addresses.createNewAddress",extra:{error:e,newAddress:l}}),a?.(e)}finally{e({isLoadingSubmitAddressForm:!1})}},updateAddress:async({onSuccess:t,onError:a,addressCode:l,updatedAddress:n,coordinateDetails:i,seoLocale:u,onRefreshSuccess:c})=>{e({isLoadingSubmitAddressForm:!0});try{let a=(0,r.mapUpdateAddressFormToPayload)(l,n,i),{data:{addresses:d}}=await (0,s.addressesSVC)().updateAddress(a);await o({seoLocale:u,onSuccess:(e,t)=>c?.(t)}),e({addresses:d}),t?.()}catch(e){(0,d.reportEvent)({message:"API Error: Failed to update address",logger:"stores.addresses.updateAddress",extra:{error:e,addressCode:l,updatedAddress:n}}),a?.(e)}finally{e({isLoadingSubmitAddressForm:!1})}},isLoadingDeleteAddress:!1,deleteAddress:async({onSuccess:t,onError:a,onComplete:l,addressCode:r,seoLocale:n})=>{e({isLoadingDeleteAddress:!0});try{let{data:{addresses:a}}=await (0,s.addressesSVC)().deleteAddress(r);await o({seoLocale:n}),e({addresses:a}),t?.()}catch(e){(0,d.reportEvent)({message:"API Error: Failed to delete address",logger:"stores.addresses.deleteAddress",extra:{error:e,addressCode:r}}),a?.(e)}finally{e({isLoadingDeleteAddress:!1}),l?.()}},isLoadingSetLocation:!1,setLocation:async({onSuccess:t,onError:a,seoLocale:l,...r})=>{e({isLoadingSetLocation:!0});try{let{data:e}=await (0,s.addressesSVC)().setLocation(r);await o({seoLocale:l}),t?.(e.success)}catch(e){(0,d.reportEvent)({message:"API Error: Failed to set location",logger:"stores.addresses.setLocation",extra:{error:e,payload:r}}),a?.(e)}finally{e({isLoadingSetLocation:!1})}}}));e.s(["default",0,n])},649479,e=>{e.v({asterisk:"FieldLayout-module-scss-module__5AV5wa__asterisk",error:"FieldLayout-module-scss-module__5AV5wa__error",errorsWrapper:"FieldLayout-module-scss-module__5AV5wa__errorsWrapper",field:"FieldLayout-module-scss-module__5AV5wa__field",header:"FieldLayout-module-scss-module__5AV5wa__header",helperText:"FieldLayout-module-scss-module__5AV5wa__helperText",textError:"FieldLayout-module-scss-module__5AV5wa__textError"})},281578,e=>{e.v({clear:"TextInput-module-scss-module__0ap4Za__clear",hasClear:"TextInput-module-scss-module__0ap4Za__hasClear",input:"TextInput-module-scss-module__0ap4Za__input",inputContainer:"TextInput-module-scss-module__0ap4Za__inputContainer"})},11868,722630,e=>{"use strict";var t=e.i(843476),s=e.i(271645),a=e.i(207670),l=e.i(517657),r=e.i(649479);let d=({required:e,children:s,error:l,helperText:d,label:o,className:n,ref:i})=>{let u=Array.isArray(l)&&l.some(e=>!!e)||!Array.isArray(l)&&!!l;return(0,t.jsxs)("div",{className:(0,a.default)(r.default.field,n,{[r.default.error]:u}),ref:i,children:[o&&(0,t.jsxs)("div",{className:r.default.header,children:[(0,t.jsxs)("label",{children:[(0,t.jsx)("span",{children:o}),e&&(0,t.jsx)("span",{className:r.default.asterisk,children:" *"})]}),d&&(0,t.jsx)("span",{className:r.default.helperText,children:d})]}),s,l&&!Array.isArray(l)&&(0,t.jsx)("p",{className:r.default.textError,children:l}),l&&Array.isArray(l)&&(0,t.jsx)("div",{className:r.default.errorsWrapper,children:l.filter(e=>!!e).map(e=>(0,t.jsx)("p",{className:r.default.textError,children:e},e))})]})};e.s(["default",0,d],722630);var o=e.i(340801),n=e.i(755581),i=e.i(281578);e.s(["default",0,({disabled:e=!1,required:r=!1,error:u,helperText:c,label:p,name:m="",onBlur:f,onFocus:_,onChange:h,onPaste:g,onKeyDown:y,onClear:x,placeholder:S,tabIndex:T,value:v,type:b="text",inputClass:A,wrapperId:C,wrapperRef:P,inputRef:N,prefix:w,suffix:j,pattern:O,wrapperClass:I,containerClass:L,min:E,max:F,step:B,autoFocus:W=!1,autoScrollIntoView:D,readOnly:V=!1})=>{let R=(0,s.useRef)(null),M=(0,s.useRef)(null),k=(0,s.useCallback)((0,l.default)(()=>{document.activeElement===M.current&&D&&R.current?.scrollIntoView({block:"center",behavior:"smooth"})},300),[D]);return(0,s.useEffect)(()=>{if(n.IS_BROWSER)return window.visualViewport?.addEventListener("resize",k),()=>{window.visualViewport?.removeEventListener("resize",k)}},[k]),(0,t.jsx)(d,{ref:R,className:I,label:p,error:u,helperText:c,required:r,children:(0,t.jsxs)("div",{className:(0,a.default)(i.default.inputContainer,L),id:C,ref:P,children:[w,(0,t.jsx)("input",{step:B,autoComplete:"off",autoFocus:W,pattern:O,className:(0,a.default)(A,i.default.input,!!x&&i.default.hasClear),disabled:e,name:m,onBlur:f,onFocus:e=>{_?.(e),k()},onChange:h,onPaste:g,onKeyDown:y,placeholder:S,ref:e=>{M.current=e,N&&("current"in N?N.current=e:N(e))},tabIndex:T,type:b,value:v,min:E,max:F,readOnly:V}),!j&&x&&v&&!e&&(0,t.jsx)("button",{className:i.default.clear,type:"button",onClick:()=>{x&&(x(),M.current&&M.current.focus())},tabIndex:-1,children:(0,t.jsx)(o.default,{name:"closeCircle"})}),j]})})}],11868)},157859,e=>{e.v({arrowContainer:"SelectBox-module-scss-module__4Ggfna__arrowContainer",container:"SelectBox-module-scss-module__4Ggfna__container",control:"SelectBox-module-scss-module__4Ggfna__control",customSelect:"SelectBox-module-scss-module__4Ggfna__customSelect",disabled:"SelectBox-module-scss-module__4Ggfna__disabled",dropdownIndicator:"SelectBox-module-scss-module__4Ggfna__dropdownIndicator",error:"SelectBox-module-scss-module__4Ggfna__error",focused:"SelectBox-module-scss-module__4Ggfna__focused",hide:"SelectBox-module-scss-module__4Ggfna__hide",indicatorSeparator:"SelectBox-module-scss-module__4Ggfna__indicatorSeparator",menu:"SelectBox-module-scss-module__4Ggfna__menu",nativeSelect:"SelectBox-module-scss-module__4Ggfna__nativeSelect",option:"SelectBox-module-scss-module__4Ggfna__option",placeholder:"SelectBox-module-scss-module__4Ggfna__placeholder",rtlDisabled:"SelectBox-module-scss-module__4Ggfna__rtlDisabled",selectTrigger:"SelectBox-module-scss-module__4Ggfna__selectTrigger",selectbox:"SelectBox-module-scss-module__4Ggfna__selectbox",selected:"SelectBox-module-scss-module__4Ggfna__selected",show:"SelectBox-module-scss-module__4Ggfna__show",singleValue:"SelectBox-module-scss-module__4Ggfna__singleValue",valueContainer:"SelectBox-module-scss-module__4Ggfna__valueContainer"})},372321,977903,e=>{"use strict";var t=e.i(843476),s=e.i(500932),a=e.i(271645),l=e.i(589039);e.s(["components",()=>l.c],977903);var l=l,r=e.i(207670),d=e.i(770703),o=e.i(722630),n=e.i(340801),i=e.i(157859);let u=(0,d.default)(()=>e.A(519738),{loadableGenerated:{modules:[975456]},ssr:!1}),c=e=>{let a,r,d=(0,s.c)(3);return d[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,t.jsx)(n.default,{name:"chevronDownV2",size:12}),d[0]=a):a=d[0],d[1]!==e?(r=(0,t.jsx)(l.c.DropdownIndicator,{...e,children:a}),d[1]=e,d[2]=r):r=d[2],r};e.s(["default",0,({disabled:e,error:s,helperText:l,id:d,name:p,label:m,onChange:f,onBlur:_,onValueChange:h,options:g,placeholder:y,rtlDisabled:x=!1,value:S,nativeClassNames:T,customClassNames:v,components:b,maxMenuHeight:A=160,menuPlacement:C="bottom",menuPortalTargetRef:P,renderNativeLabel:N,isSearchable:w=!0,hideNativeSelect:j=!1})=>{let[O,I]=(0,a.useState)(j),L=g.flatMap(e=>"options"in e?e.options:e),E=L.find(e=>e.value===S);return(0,a.useEffect)(()=>{if(!P||P.current)return void I(!0)},[P]),(0,t.jsxs)(o.default,{label:m,error:s,helperText:l,className:v?.wrapper,children:[(0,t.jsxs)("div",{className:(0,r.default)(i.default.nativeSelect,T?.wrapper,{[i.default.hide]:j}),children:[(0,t.jsxs)("select",{id:d,name:p,disabled:e,onChange:f,value:S||"",onBlur:_,className:T?.select,children:[(0,t.jsx)("option",{value:"",className:T?.option,disabled:!0,children:y}),L.map(e=>(0,t.jsx)("option",{className:T?.option,value:e.value,disabled:e.isDisabled,children:e.label},`${e.label}_${e.value}`))]}),(0,t.jsxs)("div",{className:(0,r.default)(i.default.selectTrigger,x&&i.default.rtlDisabled,T?.trigger),children:[E?.label?N?.(E)??(0,t.jsx)("span",{children:E?.label}):(0,t.jsx)("span",{className:i.default.placeholder,children:y}),(0,t.jsx)("div",{className:i.default.arrowContainer,children:(0,t.jsx)(n.default,{name:"chevronDownV2",size:12})})]})]}),(0,t.jsx)("div",{className:(0,r.default)(i.default.customSelect,{[i.default.show]:j}),children:O&&(0,t.jsx)(u,{instanceId:d,name:p,isDisabled:e,classNames:{container:()=>(0,r.default)(i.default.selectbox,i.default.container),control:e=>(0,r.default)(i.default.selectbox,i.default.control,v?.control,{[i.default.disabled]:e.isDisabled,[i.default.focused]:e.isFocused,[i.default.error]:s}),placeholder:e=>(0,r.default)(i.default.selectbox,i.default.placeholder,{[i.default.disabled]:e.isDisabled}),valueContainer:()=>(0,r.default)(i.default.selectbox,i.default.valueContainer),singleValue:()=>(0,r.default)(i.default.selectbox,i.default.singleValue),indicatorSeparator:()=>(0,r.default)(i.default.selectbox,i.default.indicatorSeparator),dropdownIndicator:e=>(0,r.default)(i.default.selectbox,i.default.dropdownIndicator,{[i.default.disabled]:e.isDisabled}),menu:()=>(0,r.default)(i.default.selectbox,i.default.menu,v?.menu),menuPortal:()=>(0,r.default)(v?.menuPortal),option:e=>(0,r.default)(i.default.selectbox,i.default.option,{[i.default.disabled]:e.isDisabled,[i.default.selected]:e.isSelected})},components:{...b,DropdownIndicator:c},value:E,onChange:e=>{let t=e?.value;t&&h?.(t)},options:g,placeholder:y,maxMenuHeight:A,menuPlacement:C,menuPortalTarget:P?.current,isSearchable:w})})]})}],372321)},204905,e=>{e.v({dialCode:"PhoneInput-module-scss-module__hZRX0W__dialCode",disabled:"PhoneInput-module-scss-module__hZRX0W__disabled",inputContainer:"PhoneInput-module-scss-module__hZRX0W__inputContainer",inputField:"PhoneInput-module-scss-module__hZRX0W__inputField",menuPortal:"PhoneInput-module-scss-module__hZRX0W__menuPortal",nativeSelect:"PhoneInput-module-scss-module__hZRX0W__nativeSelect",option:"PhoneInput-module-scss-module__hZRX0W__option",selectControl:"PhoneInput-module-scss-module__hZRX0W__selectControl",selectWrapper:"PhoneInput-module-scss-module__hZRX0W__selectWrapper"})},327800,e=>{"use strict";var t=e.i(843476),s=e.i(500932),a=e.i(271645),l=e.i(207670),r=e.i(977903),d=e.i(882985),o=e.i(11868),n=e.i(372321),i=e.i(579338),u=e.i(621476),c=e.i(204905);let p=n.default,m=e=>(0,t.jsxs)(r.components.Option,{...e,className:(0,l.default)(c.default.option,{[c.default.disabled]:e.isDisabled}),children:[(0,t.jsx)(d.default,{alt:e.data.name,src:e.data.flagUrl,width:30}),(0,t.jsx)("span",{className:c.default.dialCode,children:e.data.dialCode}),(0,t.jsx)("span",{children:e.data.name})]}),f=e=>{let a,l=(0,s.c)(2);return l[0]!==e?(a=(0,t.jsx)(r.components.SingleValue,{...e,children:e.data.dialCode}),l[0]=e,l[1]=a):a=l[1],a};e.s(["default",0,({label:e,placeholder:s="0123456789",containerClass:r,inputName:d,inputValue:n,inputOnChange:_,inputOnFocus:h,inputOnBlur:g,inputClass:y,inputRef:x,selectName:S,selectValue:T,selectOnChange:v,selectOnValueChange:b,selectOnBlur:A,selectClasses:C,selectNativeClasses:P,error:N,disabled:w,required:j,autoScrollIntoView:O})=>{let{t:I}=(0,u.useTranslationFunction)("client"),L=(0,a.useRef)(null),E=(0,i.default)(e=>e.noonConfig),F=(0,a.useMemo)(()=>{let e=E?.phoneConfigs.phoneCountryList.map(e=>({...e,label:e.name,value:e.dialCode}))??[],t=e.filter(e=>e.isFrequentlyUsed),s=e.filter(e=>!e.isFrequentlyUsed);return[{label:I("frequently-used"),options:t},{label:I("other-countries"),options:s}]},[E]);return(0,t.jsx)(o.default,{inputRef:x,wrapperId:"phoneInput",wrapperRef:L,label:e,placeholder:s,name:d,value:n,onChange:_,onFocus:h,onBlur:g,inputClass:(0,l.default)(y,c.default.inputField),containerClass:(0,l.default)(c.default.inputContainer,r),type:"number",min:0,pattern:"[0-9]*",error:N,disabled:w,required:j,autoScrollIntoView:O,prefix:(0,t.jsx)(p,{name:S,value:T,onChange:v,onValueChange:b,onBlur:A,customClassNames:{...C,control:(0,l.default)(C?.control,c.default.selectControl),wrapper:(0,l.default)(C?.wrapper,c.default.selectWrapper),menuPortal:(0,l.default)(C?.menuPortal,c.default.menuPortal)},nativeClassNames:{...P,select:(0,l.default)(P?.select,c.default.nativeSelect)},components:{Option:m,SingleValue:f},renderNativeLabel:({dialCode:e})=>(0,t.jsx)("span",{children:e}),options:F,disabled:w,menuPortalTargetRef:L,menuPlacement:"top"})})}])},669744,e=>{e.v({field:"OtpInput-module-scss-module__SU1uCq__field",fieldLayout:"OtpInput-module-scss-module__SU1uCq__fieldLayout",wrapper:"OtpInput-module-scss-module__SU1uCq__wrapper"})},662688,e=>{"use strict";var t=e.i(843476),s=e.i(500932),a=e.i(271645),l=e.i(207670),r=e.i(11868),d=e.i(722630),o=e.i(669744);let n=(e,t,s)=>e.concat(Array.from({length:t},()=>s)).slice(0,t);function i(e){return e?.blur()}function u(e){return e.currentTarget.select()}e.s(["default",0,e=>{let c,p,m,f,_,h,g,y,x,S=(0,s.c)(35),{length:T,value:v,onChange:b,error:A,className:C,helperText:P,digitClass:N,digitWrapperClass:w,disabled:j}=e,O=void 0===T?6:T,I=void 0===v?"":v;S[0]===Symbol.for("react.memo_cache_sentinel")?(c=[],S[0]=c):c=S[0];let L=(0,a.useRef)(c);S[1]!==O||S[2]!==I?(p=n(I.split(""),O,""),S[1]=O,S[2]=I,S[3]=p):p=S[3];let[E,F]=(0,a.useState)(p);S[4]!==O?(m=e=>{if(e>=O)return void L.current.forEach(i);if(e<0)return;let t=L.current[e];t&&t.focus()},S[4]=O,S[5]=m):m=S[5];let B=m;S[6]!==B||S[7]!==b||S[8]!==E?(f=(e,t)=>{if(!e.target.value.length)return;let s=e.target.value.replace(E[t]??"","").slice(0,1),a=[...E.slice(0,t),s,...E.slice(t+1)],l=a.join("");F(a),b?.(l),B(t+1)},S[6]=B,S[7]=b,S[8]=E,S[9]=f):f=S[9];let W=f;S[10]!==B||S[11]!==O||S[12]!==b||S[13]!==E?(_=(e,t)=>{e.preventDefault();let s=e.clipboardData.getData("Text").replaceAll(/\D+/g,"");if(!s.length)return;let a=O-t,l=s.slice(0,a),r=[...E.slice(0,t),...l],d=r.join("");F(r),b?.(d),B(d.length)},S[10]=B,S[11]=O,S[12]=b,S[13]=E,S[14]=_):_=S[14];let D=_;S[15]!==B||S[16]!==b||S[17]!==E?(h=(e,t)=>{if("Backspace"!==e.key)return;let s=E.slice(0,t),a=E.slice(t+1),l=[...n(s,t+1,""),...a],r=l.join("");F(l),b?.(r),B(t-1)},S[15]=B,S[16]=b,S[17]=E,S[18]=h):h=S[18];let V=h;return S[19]!==C?(g=(0,l.default)(C,o.default.fieldLayout),S[19]=C,S[20]=g):g=S[20],S[21]!==N||S[22]!==w||S[23]!==j||S[24]!==W||S[25]!==V||S[26]!==D||S[27]!==O||S[28]!==E?(y=(0,t.jsx)("div",{className:o.default.wrapper,children:Array.from({length:O}).map((e,s)=>(0,t.jsx)(r.default,{wrapperClass:w,inputClass:(0,l.default)(o.default.field,N),pattern:"[0-9]*",type:"number",min:0,max:9,disabled:j,onChange:e=>W(e,s),onPaste:e=>D(e,s),onKeyDown:e=>V(e,s),onFocus:u,value:E[s]??"",inputRef:e=>{L.current[s]=e},autoFocus:0===s,autoScrollIntoView:!0},s))}),S[21]=N,S[22]=w,S[23]=j,S[24]=W,S[25]=V,S[26]=D,S[27]=O,S[28]=E,S[29]=y):y=S[29],S[30]!==A||S[31]!==P||S[32]!==y||S[33]!==g?(x=(0,t.jsx)(d.default,{error:A,helperText:P,className:g,children:y}),S[30]=A,S[31]=P,S[32]=y,S[33]=g,S[34]=x):x=S[34],x}])},984177,e=>{"use strict";var t=e.i(500932),s=e.i(271645);e.s(["default",0,(e,a)=>{let l,r,d,o=(0,t.c)(13),{time:n,ascending:i,resetOnEnd:u,disabled:c}=e,p=void 0===n?0:n,m=void 0!==i&&i,f=void 0!==u&&u,_=void 0!==c&&c;o[0]!==a?(l=void 0===a?[]:a,o[0]=a,o[1]=l):l=o[1];let h=l,[g,y]=(0,s.useState)(m?0:p),x=(0,s.useRef)(null);return o[2]!==m||o[3]!==_||o[4]!==f||o[5]!==p?(r=()=>{if(_||!p){x.current&&(clearInterval(x.current),x.current=null);return}return y(m?0:p),x.current&&clearInterval(x.current),x.current=setInterval(()=>{y(e=>{let t=m?e+1:e-1;if(m?t>=p:t<=0)if(f)return m?0:p;else x.current&&(clearInterval(x.current),x.current=null);return t})},1e3),()=>{x.current&&(clearInterval(x.current),x.current=null)}},o[2]=m,o[3]=_,o[4]=f,o[5]=p,o[6]=r):r=o[6],o[7]!==m||o[8]!==h||o[9]!==_||o[10]!==f||o[11]!==p?(d=[p,m,f,_,...h],o[7]=m,o[8]=h,o[9]=_,o[10]=f,o[11]=p,o[12]=d):d=o[12],(0,s.useEffect)(r,d),g}])},182258,e=>{"use strict";var t=e.i(768834),s=e.i(166496),a=e.i(214854),l=e.i(461066);let r=(0,t.create)((e,t)=>({shouldShowOTPScreen:!1,phoneNumber:null,setShouldShowOTPScreen:(t,s=null)=>e({shouldShowOTPScreen:t,phoneNumber:s}),isLoadingSendOTP:!1,otpResponse:null,sendPhoneOTP:async({onAccountVerificationRequired:r,onSuccess:d,onError:o,payload:{action:n,isPrimary:i=!1,...u}})=>{let c=t().phoneNumber;if(c){e({isLoadingSendOTP:!0,otpResponse:null});try{let t=await (0,l.getRecaptchaPayload)(n),{data:s}=await (0,a.otpSVC)().sendPhoneOTP({phone:c,isPrimary:i,recaptcha:{...u,...t}});if("isAccountVerificationRequired"in s){let{data:e}=await (0,a.otpSVC)().sendEmailOTP();r?.(e);return}return e({otpResponse:s}),d?.(s),s}catch(e){(0,s.reportEvent)({message:"API Error: Failed to send phone OTP",logger:"stores.otp.sendPhoneOTP",extra:{error:e,phone:c,isPrimary:i}}),o?.(e)}finally{e({isLoadingSendOTP:!1})}}},sendEmailOTP:async({onSuccess:t,onError:l})=>{e({isLoadingSendOTP:!0});try{await (0,a.otpSVC)().sendEmailOTP(),t?.()}catch(e){(0,s.reportEvent)({message:"API Error: Failed to send email OTP",logger:"stores.otp.sendEmailOTP",extra:{error:e}}),l?.(e)}finally{e({isLoadingSendOTP:!1})}},isLoadingVerifyOTP:!1,verifyOTPResponse:null,verifyPhoneOTP:async({onSuccess:l,onError:r,payload:{isPrimary:d=!1,...o}})=>{let n=t().phoneNumber;if(n){e({isLoadingVerifyOTP:!0,verifyOTPResponse:null});try{let{data:t}=await (0,a.otpSVC)().verifyPhoneOTP({...o,isPrimary:d,phone:n});return e({verifyOTPResponse:t}),l?.(t),t}catch(e){(0,s.reportEvent)({message:"API Error: Failed to verify phone OTP",logger:"stores.otp.verifyPhoneOTP",extra:{error:e,phone:n,isPrimary:d}}),r?.(e)}finally{e({isLoadingVerifyOTP:!1})}}},verifyEmailOTP:async({onSuccess:t,onError:l,otp:r})=>{e({isLoadingVerifyOTP:!0});try{await (0,a.otpSVC)().verifyEmailOTP(r),t?.()}catch(e){(0,s.reportEvent)({message:"API Error: Failed to verify email OTP",logger:"stores.otp.verifyEmailOTP",extra:{error:e}}),l?.(e)}finally{e({isLoadingVerifyOTP:!1})}}}));e.s(["default",0,r])},716305,e=>{e.v({attempts:"OtpScreenHeader-module-scss-module__xjrENa__attempts",backButton:"OtpScreenHeader-module-scss-module__xjrENa__backButton",backButtonWrapper:"OtpScreenHeader-module-scss-module__xjrENa__backButtonWrapper",header:"OtpScreenHeader-module-scss-module__xjrENa__header"})},70986,e=>{"use strict";var t=e.i(843476),s=e.i(271645),a=e.i(142031),l=e.i(340801),r=e.i(182258),d=e.i(621476),o=e.i(716305);e.s(["default",0,({remainingAttempts:e,hideRemainingAttempts:n,backOnClick:i})=>{let{t:u}=(0,d.useTranslationFunction)("client"),c=(0,r.default)(e=>e.otpResponse?.remainingAttempts),p=(0,r.default)(e=>e.setShouldShowOTPScreen),m=e??c,f=(0,s.useMemo)(()=>{switch(m){case 0:return u("_otp-remaining-attempts-zero");case 1:return u("_otp-remaining-attempts-single");default:return u("_otp-remaining-attempts",{count:m})}},[m]);return(0,t.jsxs)("section",{className:o.default.header,children:[(0,t.jsx)(a.default,{onClick:i??(()=>p(!1)),className:o.default.backButton,wrapperClassName:o.default.backButtonWrapper,variant:"tertiary",children:(0,t.jsx)(l.default,{name:"arrowLeft"})}),!n&&(0,t.jsx)("p",{className:o.default.attempts,children:f})]})}])},688322,e=>{"use strict";var t,s=((t={}).WhatsApp="whatsapp_otp",t.SMS="sms",t.Email="email",t);e.s(["TOTPChannel",()=>s])},699306,e=>{e.v({channel:"OtpChannel-module-scss-module__2IpaMW__channel",disabled:"OtpChannel-module-scss-module__2IpaMW__disabled",sms:"OtpChannel-module-scss-module__2IpaMW__sms",whatsapp:"OtpChannel-module-scss-module__2IpaMW__whatsapp"})},703016,e=>{e.v({currentChannel:"OtpInfo-module-scss-module__Jd64SW__currentChannel",message:"OtpInfo-module-scss-module__Jd64SW__message",title:"OtpInfo-module-scss-module__Jd64SW__title"})},311535,e=>{e.v({action:"OtpNextAttemptChannels-module-scss-module__RDmpya__action",actionWrapper:"OtpNextAttemptChannels-module-scss-module__RDmpya__actionWrapper",currentChannel:"OtpNextAttemptChannels-module-scss-module__RDmpya__currentChannel",disabledAction:"OtpNextAttemptChannels-module-scss-module__RDmpya__disabledAction",resendActions:"OtpNextAttemptChannels-module-scss-module__RDmpya__resendActions"})},262257,669966,e=>{"use strict";var t=e.i(843476),s=e.i(207670),a=e.i(688322),l=e.i(621476),r=e.i(268826),d=e.i(882985),o=e.i(699306);let n={[a.TOTPChannel.WhatsApp]:{labelKey:"_otp-channels-whatsapp",icon:"whatsapp"},[a.TOTPChannel.SMS]:{labelKey:"_otp-channels-sms",icon:"sms"},[a.TOTPChannel.Email]:{labelKey:"_otp-channels-email",icon:"mail"}},i=({channel:e,displayText:i,className:u,disabled:c})=>{let{t:p}=(0,l.useTranslationFunction)("client"),{icon:m,labelKey:f}=n[e];return(0,t.jsxs)("p",{className:(0,s.default)(u,o.default.channel,{[o.default.whatsapp]:e===a.TOTPChannel.WhatsApp,[o.default.sms]:e===a.TOTPChannel.SMS,[o.default.disabled]:c}),children:[(0,t.jsx)(d.default,{alt:e,src:r.default.socialMedia[m],height:20}),i??p(f)]})};e.s(["default",0,i],262257);var u=e.i(142031),c=e.i(311535);e.s(["default",0,({nextAttemptChannels:e=[],handleSendOTP:a,disabled:l})=>(0,t.jsx)("div",{className:c.default.resendActions,children:e.map(e=>(0,t.jsx)(u.default,{className:(0,s.default)(c.default.action,{[c.default.disabledAction]:!1===e.isEnabled||l}),wrapperClassName:c.default.actionWrapper,variant:"secondary",disabled:!1===e.isEnabled||l,onClick:t=>{t.stopPropagation(),a(e.id)},children:(0,t.jsx)(i,{channel:e.id,displayText:e.displayText,className:c.default.currentChannel,disabled:!1===e.isEnabled||l})},e.id))})],669966)},498103,e=>{e.v({resendCta:"OtpActions-module-scss-module__IAB9Xa__resendCta",resendTitle:"OtpActions-module-scss-module__IAB9Xa__resendTitle"})},793539,e=>{e.v({loader:"OtpScreenLoader-module-scss-module__BoGPQa__loader"})},915635,e=>{e.v({article:"ChannelOtpScreen-module-scss-module__UGzbXW__article",otpInput:"ChannelOtpScreen-module-scss-module__UGzbXW__otpInput"})},389749,e=>{e.v({article:"EmailOtpScreen-module-scss-module__9LfJ4W__article",channel:"EmailOtpScreen-module-scss-module__9LfJ4W__channel",email:"EmailOtpScreen-module-scss-module__9LfJ4W__email",resend:"EmailOtpScreen-module-scss-module__9LfJ4W__resend",title:"EmailOtpScreen-module-scss-module__9LfJ4W__title"})},191760,e=>{e.v({article:"OtpScreen-module-scss-module__KXlTdW__article",done:"OtpScreen-module-scss-module__KXlTdW__done",step:"OtpScreen-module-scss-module__KXlTdW__step",stepIndicatorWrapper:"OtpScreen-module-scss-module__KXlTdW__stepIndicatorWrapper",title:"OtpScreen-module-scss-module__KXlTdW__title"})},925663,e=>{"use strict";var t,s=e.i(843476),a=e.i(271645),l=e.i(207670),r=e.i(182258),d=e.i(289834),o=e.i(621476),n=e.i(662688),i=e.i(70986),u=e.i(500932),c=e.i(262257),p=e.i(725087),m=e.i(703016);let f=()=>{let e,t,a,l,d,n,i=(0,u.c)(15),{t:f}=(0,o.useTranslationFunction)("client"),g=(0,r.default)(_),y=(0,r.default)(h),x=y?.usedChannels?.[0];return i[0]!==f?(e=f("_otp-verify-mobile-number-title"),i[0]=f,i[1]=e):e=i[1],i[2]!==e?(t=(0,s.jsx)("p",{className:m.default.title,children:e}),i[2]=e,i[3]=t):t=i[3],i[4]!==g||i[5]!==f?(a=f("_otp-verify-mobile-number-description",{phoneNumber:g}),i[4]=g,i[5]=f,i[6]=a):a=i[6],i[7]!==a?(l=(0,s.jsx)("p",{className:m.default.message,children:(0,s.jsx)(p.default,{children:a})}),i[7]=a,i[8]=l):l=i[8],i[9]!==x?(d=x&&(0,s.jsx)(c.default,{channel:x.id,displayText:x.displayText,className:m.default.currentChannel}),i[9]=x,i[10]=d):d=i[10],i[11]!==t||i[12]!==l||i[13]!==d?(n=(0,s.jsxs)("section",{children:[t,l,d]}),i[11]=t,i[12]=l,i[13]=d,i[14]=n):n=i[14],n};function _(e){return e.phoneNumber}function h(e){return e.otpResponse}var g=e.i(984177),y=e.i(669966),x=e.i(498103);let S=({handleSendOTP:e})=>{let{t}=(0,o.useTranslationFunction)("client"),l=(0,r.default)(e=>e.otpResponse),d=(0,a.useMemo)(()=>l?.remainingAttempts??0,[l]),n=(0,g.default)({time:15,disabled:!d}),i=!!d&&!n,u=(0,a.useMemo)(()=>d?n>0?t("_otp-resend-otp-in",{time:n}):t("_otp-resend-otp-via"):t("_otp-resend-otp"),[n,d]);return l&&0!==l.nextAttemptChannels.length?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{className:x.default.resendTitle,children:t("_otp-missing-code")}),(0,s.jsx)("p",{className:x.default.resendCta,children:u}),(0,s.jsx)(y.default,{nextAttemptChannels:l.nextAttemptChannels,handleSendOTP:e,disabled:!i})]}):null};var T=e.i(675023),v=e.i(793539);let b=()=>{let e,t=(0,u.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)("div",{className:v.default.loader,children:(0,s.jsx)(T.default,{})}),t[0]=e):e=t[0],e};var A=e.i(915635);let C=({onSuccess:e,isPrimary:t,handleSendOTP:l})=>{let{t:u}=(0,o.useTranslationFunction)("client"),c=(0,r.default)(e=>e.setShouldShowOTPScreen),p=(0,r.default)(e=>e.otpResponse),m=(0,r.default)(e=>e.isLoadingSendOTP),_=(0,r.default)(e=>e.verifyPhoneOTP),h=(0,r.default)(e=>e.isLoadingVerifyOTP),g=(0,a.useCallback)(s=>{!p?.otpLength||s.length<p.otpLength||_({payload:{otp:s,phoneNumber:p.phoneNumber,isPrimary:t},onSuccess:()=>{c(!1),e?.()},onError:e=>"error"in e?(0,d.showToast)({toastBody:String(e.error),toastType:"error"}):(0,d.showToast)({toastBody:u("_empty-state-generic-error-title"),toastType:"error"})})},[p?.otpLength]);return m||!p?(0,s.jsx)(b,{}):(0,s.jsxs)("article",{className:A.default.article,children:[h&&(0,s.jsx)(b,{}),(0,s.jsx)(i.default,{}),(0,s.jsx)(f,{}),(0,s.jsx)(n.default,{length:p.otpLength,className:A.default.otpInput,onChange:g}),(0,s.jsx)(S,{handleSendOTP:l})]})};var P=e.i(882985),N=e.i(268826),w=e.i(142031),j=e.i(167577),O=e.i(389749);let I=({onSuccess:e,otpLength:t,remainingAttempts:u})=>{let{t:c}=(0,o.useTranslationFunction)("client"),m=(0,g.default)({time:15}),f=(0,r.default)(e=>e.setShouldShowOTPScreen),_=(0,r.default)(e=>e.isLoadingSendOTP),h=(0,r.default)(e=>e.sendEmailOTP),y=(0,r.default)(e=>e.isLoadingVerifyOTP),x=(0,r.default)(e=>e.verifyEmailOTP),S=(0,j.default)(e=>e.whoAmI?.customer?.email),T=(0,a.useCallback)(()=>{h({onSuccess:e,onError:e=>(f(!1),"error"in e)?(0,d.showToast)({toastBody:String(e.error),toastType:"error"}):(0,d.showToast)({toastBody:c("_empty-state-generic-error-title"),toastType:"error"})})},[]),v=(0,a.useCallback)(s=>{s.length<t||x({otp:s,onSuccess:()=>{e?.()},onError:e=>"error"in e?(0,d.showToast)({toastBody:String(e.error),toastType:"error"}):(0,d.showToast)({toastBody:c("_empty-state-generic-error-title"),toastType:"error"})})},[t]);return _?(0,s.jsx)(b,{}):(0,s.jsxs)("article",{className:(0,l.default)(A.default.article,O.default.article),children:[y&&(0,s.jsx)(b,{}),(0,s.jsx)(i.default,{remainingAttempts:u}),(0,s.jsx)("p",{className:O.default.title,children:(0,s.jsx)(p.default,{children:c("_auth-email-otp-title",{otpLength:t})})}),(0,s.jsxs)("p",{className:O.default.channel,children:[(0,s.jsx)(P.default,{alt:"Mail Icon",src:N.default.socialMedia.mail}),(0,s.jsx)("span",{className:O.default.email,children:S})]}),(0,s.jsx)(n.default,{length:t,className:A.default.otpInput,onChange:v}),m>0?(0,s.jsx)("p",{className:O.default.resend,children:(0,s.jsx)(p.default,{children:c("_auth-email-otp-resend-counter",{resendCounter:m})})}):(0,s.jsx)(w.default,{variant:"tertiary",onClick:T,className:O.default.resend,children:c("_auth-email-otp-resend")})]})};var L=e.i(191760),E=((t=E||{})[t.Email=1]="Email",t[t.Phone=2]="Phone",t);e.s(["default",0,({onSuccess:e,action:t,otpChannel:n,isPrimary:i,disableSendOnMount:u})=>{let{t:c}=(0,o.useTranslationFunction)("client"),[p,m]=(0,a.useState)(1),[f,_]=(0,a.useState)(null),h=(0,r.default)(e=>e.setShouldShowOTPScreen),g=(0,r.default)(e=>e.otpResponse),y=(0,r.default)(e=>e.sendPhoneOTP),x=(0,r.default)(e=>e.isLoadingSendOTP),S=(0,a.useCallback)(e=>{y({onAccountVerificationRequired:e=>{_(e),m(1)},onSuccess:()=>{g?.otpLength&&(0,d.showToast)({toastBody:c("_otp-sent-success",{phoneNumber:g.phoneNumber}),toastType:"success"})},onError:e=>(h(!1),"error"in e)?(0,d.showToast)({toastBody:String(e.error),toastType:"error"}):(0,d.showToast)({toastBody:c("_empty-state-generic-error-title"),toastType:"error"}),payload:{action:t,isPrimary:i,otpChannel:e??n}})},[]);return((0,a.useEffect)(()=>{u||S()},[]),f)?(0,s.jsxs)("article",{className:L.default.article,children:[(0,s.jsx)("h1",{className:L.default.title,children:c("_auth-steps",{step:p,total:2})}),(0,s.jsxs)("div",{className:L.default.stepIndicatorWrapper,children:[(0,s.jsx)("div",{className:(0,l.default)(L.default.step,L.default.done)}),(0,s.jsx)("div",{className:(0,l.default)(L.default.step,{[L.default.done]:2===p})})]}),1===p&&(0,s.jsx)(I,{otpLength:f.otpLength,remainingAttempts:f.remainingAttempts,onSuccess:()=>{m(2),S()}}),2===p&&(0,s.jsx)(C,{onSuccess:e,isPrimary:i,handleSendOTP:S})]}):x||!g?(0,s.jsx)(b,{}):(0,s.jsx)(C,{onSuccess:e,isPrimary:i,handleSendOTP:S})}],925663)}]);